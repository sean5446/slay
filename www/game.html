<!DOCTYPE html>
<html>
<head>
	<title>{{title}}</title>

	<meta content="text/html;charset=utf-8" http-equiv="Content-Type">
	<meta content="utf-8">

	<link type="text/css" rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.css" />
	<link type="text/css" rel="stylesheet" href="../../css/game.css" />

	<script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
	<script src="https://code.jquery.com/ui/1.12.1/jquery-ui.min.js"></script>
	<script src="../../js/jquery.ui.touch-punch.min.js"></script>

	<script src="../../js/board.js"></script>
	<script src="../../js/game.js"></script>

	<script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-app.js"></script>
	<script src="https://www.gstatic.com/firebasejs/8.4.1/firebase-auth.js"></script>

	<script type="text/javascript">
		function firebaseInit(data) {
			firebase.initializeApp(data);
			firebase.auth().onAuthStateChanged(function(user) {
				if (user) {
					// user is signed in
					user.getIdToken().then(function(accessToken) {
						initGame(user.displayName, user.email);
					});
				} else {
					// user is signed out
					window.location.replace('/');
				}
			}, function(error) {
				console.log(error);
			});
		}

		$(document).ready(function() {
			$.ajax({
				type: "GET",
				dataType: "json",
				url: `/firebase`,
				success: function(data) {
					firebaseInit(data);
				},
				error: function(data) {
					console.log(data)
				}
			});
		});
	</script>
</head>
<body>

<div id="map" class="vertical-map">
	<div id="tiles">
		<!-- tiles -->
	</div>
</div>

<div id="panel" class="vertical-panel">

	<div id="economy">
		<div id="savings">Savings: 0</div>
		<div id="income">Income: 0</div>
		<div id="wages">Wages: 0</div>
		<div id="balance">Balance: 0</div>
		<div id="money">Money: 0</div>
		<div id="unit"></div>
	</div>

	<div id="players">
		<!-- players -->
	</div>

	<div id="units">
		<div>Units</div>
		<div><img src="../img/man.png" height="50">: 2</div>
		<div><img src="../img/spearman.png" height="50">: 6</div>
		<div><img src="../img/knight.png" height="50">: 18</div>
		<div><img src="../img/barron.png" height="50">: 54</div>
	</div>

	<div id="buttons">
		<button id="buttonEndTurn" class="ui-button ui-widget ui-corner-all">End turn</button>
		<button id="buttonReset" class="ui-button ui-widget ui-corner-all">Reset</button>
	</div>

</div>

</body>
</html>
